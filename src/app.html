<!doctype html>
<html lang="en" data-color-mode="dark" data-light-theme="light" data-dark-theme="dark">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<script>
			(function () {
				var t = localStorage.getItem('app-theme');
				if (t === 'light' || t === 'auto') {
					document.documentElement.setAttribute('data-color-mode', t === 'auto' ? 'auto' : 'light');
				}
			})();
		</script>
		<link rel="icon" href="/favicon.svg" type="image/svg+xml" />
		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">%sveltekit.body%</div>
		<script>
			(function () {
				var KEY = 'tokensmith:chunk-reload';
				var raw = localStorage.getItem(KEY);
				var last = raw ? parseInt(raw, 10) : 0;
				var cooldown = Date.now() - last < 30000;

				function bustCache() {
					if (cooldown) return;
					localStorage.setItem(KEY, String(Date.now()));
					var url = location.pathname + '?_cb=' + Date.now();
					location.replace(url);
				}

				window.addEventListener('error', function (e) {
					if (e.message && e.message.indexOf('Failed to fetch dynamically imported module') !== -1) bustCache();
				});
				window.addEventListener('unhandledrejection', function (e) {
					var r = String(e.reason || '');
					if (r.indexOf('Failed to fetch dynamically imported module') !== -1 || r.indexOf('Loading chunk') !== -1) bustCache();
				});
			})();
		</script>
	</body>
</html>
